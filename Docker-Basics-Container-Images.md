# References
Buildkit Features and Documentation
If you want to learn more about features Buildkit has to offer, please check out the following pages:

https://docs.docker.com/develop/develop-images/build_enhancements/

https://docs.docker.com/engine/reference/commandline/build/#specifying-external-cache-sources
# Stack
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723075-b885fbe3-50ce-40d7-9ccb-6c20351d469a.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723128-80792d4e-0f92-4397-82bd-0d0e7e2122dd.png">

# Why & What - Docker 
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727240-ea1efbec-4f7f-4fbf-b1b4-1278da129c14.png">
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727250-9b8b7475-9bfe-4d3a-9879-87c78a16fc51.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727271-50d7ec39-da68-412d-9939-7bf11c401198.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727285-7d32394f-78c6-4897-87f7-a14513438a98.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727296-b81f5a4f-a205-4f21-97c0-f2f9b6d66f9e.png">
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727330-557d260a-fff2-484c-9807-9507c65f2882.png">


<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722992-50252113-586a-4d21-ae4c-4a372c6f2a2e.png">
- container ISOLATION

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727055-eb6dde70-05bc-4a9e-9838-5feb674be378.png">
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727123-69615a7c-ae6e-4907-bee1-134b58a79b10.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126727118-3cea9136-6972-4024-953b-bc269f8a10dd.png">

# Docker Container
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722754-05ccce87-c9aa-4cec-99b6-d1b0e54de89d.png">
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722879-0bf71eee-c048-436d-94f4-91e74b82e914.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722890-74e4dac6-33f6-41c3-a414-411ab428631e.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722930-76ba3f89-b6a8-40d2-9763-129948de0854.png">
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722957-9c966068-05f4-41ab-a4cf-9d9695d0b4be.png">


# Docker Client
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722507-7c311f11-3241-4ae5-b521-fbd08a9e697a.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722541-89afb569-f48e-44c7-893b-56fffed55d1e.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722565-51cccaa6-792e-49b5-a91f-255ca176a55f.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722614-401daafd-f224-4fa2-8cd6-110196f6e56e.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126722728-f970e75b-3185-400f-93c1-600091237351.png">

# Docker Run in details
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723196-8a27d240-02a3-40b2-ab2b-21a3b51ef375.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723269-19de1179-7ff7-435a-9646-18e958e78895.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723282-ffb27c7c-e55d-479c-a80b-9803f47e3ab4.png">
- override default behaviour
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723340-e83d5730-6725-4f36-a4ab-d37bb3db4674.png">
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723409-07fd7d03-0a79-440a-9258-5792b613ecf6.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723510-dbb14578-89e7-48eb-9bc8-6f90cd1fa3d9.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723524-32b4b405-35e9-4b33-af2a-315c810f9896.png">

- Listing running containers

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723706-401c5e3f-c431-494a-8cc5-bf7cbc0c55a4.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126723862-e7721477-bc86-4123-a30c-10ad267be092.png">
- Create docker Run / Start 

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724013-ea8c88b6-1731-4f2e-8aac-87ae0fb975b4.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724028-2d098dc5-ce62-405d-8ced-46b670403c44.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724047-21b6ce38-dfff-487a-98b6-4c550571cf18.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724114-d47aa0c6-676a-4271-a291-7ec85990fe88.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724234-7e6d9c7d-97d6-46fc-bb1c-b9cabf27a9eb.png">

- Start a Stopped Container

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724388-af00d128-2e33-4a8d-88d5-cc4db45b53c3.png">

# REMOVE Stopped Containers
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724574-8b7c333b-5346-45dd-9bcb-ca31230ab0b3.png">


# LOG from containers
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724697-54617555-842e-4811-8d1a-b55ed2bf4c69.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126724817-af03de25-0a8a-41e6-90ed-da223543756f.png">

# STOP a running container
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126725754-4bea0c50-d6ac-4b97-8f1f-58cf9ca1052c.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126725789-078e218e-03fb-4a01-a740-db9d5a43c99f.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126725811-bbebbd8b-ac84-4977-89e2-8e4c10906fa0.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126725927-c2be7f8a-7588-4f33-a2c3-5b7b9ee00469.png">

# MULTI-CMD container
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126726153-440dd07c-9700-448e-9026-3eeeba692ebd.png">
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126726160-ad1c371f-5e9c-4d6d-859c-8929101c48e7.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126726201-f5d3c7d9-8df3-43e4-be4e-cbc4fddd8fa5.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126726418-31f949e2-9f17-4f5f-a93b-5e45d153d325.png">

## -IT
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126726528-4a0bdd3c-0805-448a-8e35-e6ed3e371633.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126726607-a06a55e9-fc43-4fea-bca5-6c65c279ed7f.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126726797-b6d4acc1-00af-4f15-aa98-2be2b64928bc.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126726839-4f0c85a4-8693-4f10-afe9-cec0fa62acb9.png">

# CUSTOM DOCKER IMAGES
## Default Image
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126728434-8291632b-247e-4e2f-a926-ed1340c818a5.png">
<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126728479-1cf79c79-227d-4dee-85cf-2547acc0633b.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126728492-91dda26f-d4a3-4df0-af52-048fd1b848c9.png">
## to BUILD REDIS server
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729043-9212d472-f1d6-48cf-8932-424011ad80a3.png">

<img width="1217" alt="image" src="https://user-images.githubusercontent.com/75510135/126728739-99ff3f92-0a4b-4ee4-92a5-1ba225132b38.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126728793-1dc074b8-90d4-413e-befd-c2d0ea2eb019.png">

 - docker build .
 - docker run imageID


- TEARDOWN Dockerfile
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126728983-e94cb9cf-bb27-45c1-9012-4f9e24e9f309.png">
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729061-568c8cd1-f38a-4943-a19e-d19c7b8e74c6.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729143-7173ff46-7580-4823-8994-a1ea7323a26c.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729369-6f562b1a-ae81-4fb8-9093-6eb6a0704cfa.png">
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729481-ec66141c-d902-4387-95be-d6512c46f4bf.png">
### Build process in detail
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729517-5bc28ddb-f161-4982-b509-be481db66167.png">
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729753-378580a2-6096-4b1b-ae5b-77dda88cacd5.png">
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729803-855cae8b-d717-4441-85ec-00d578bca0cb.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126729925-aec096b0-da30-4db5-aaf3-547afe348981.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730035-2a8ba74c-f6b6-447c-9df2-ad5d540857df.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730067-8673133b-081f-4412-9b0a-c10f4e271103.png">

### OVERALL FLOW
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730221-15ea5dd1-6c38-4843-8eb6-545b43a45cb0.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730330-78092e60-da0d-4064-9aa0-a02345158753.png">

### rebuild wtith CACHE
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730410-072b443b-6201-446d-a988-5de6a144eab4.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730437-89bf4238-248b-43ac-94bd-fe1bcc94720a.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730536-30858a6d-de9c-4933-921c-d81f41f6b9da.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730623-9a8a79c2-8212-4012-9e6c-9c95e49b15ae.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730719-05361bec-8e56-4878-899b-7b57396219f0.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730767-857c081a-6d6f-4a70-9aa0-de29d936cc52.png">


### Tagging an image
<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126730921-585425e6-79bd-4a2c-ae8b-284340f4f2a4.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126731000-c1b1fcc3-80d7-4884-9f00-abf76d53e272.png">

<img width="1095" alt="image" src="https://user-images.githubusercontent.com/75510135/126731038-a5c50761-100b-45c1-a0a3-f2cd7482645e.png">

Quick Note for Windows Users

In the upcoming lecture, we will be running a command to create a new image using docker commit with this command:

docker commit -c 'CMD ["redis-server"]' CONTAINERID

If you are a Windows user you may get an error like "/bin/sh: [redis-server]: not found" or "No Such Container"

Instead, try running the command like this:

docker commit -c "CMD 'redis-server'" CONTAINERID

### docker COMMIT - to create image out of container
<img width="1046" alt="image" src="https://user-images.githubusercontent.com/75510135/126731310-35e585a1-d58b-49ed-bac6-892f55290177.png">

<img width="1046" alt="image" src="https://user-images.githubusercontent.com/75510135/126731382-c5668439-33bb-44b9-87ba-6e3be015cf40.png">

<img width="1046" alt="image" src="https://user-images.githubusercontent.com/75510135/126731462-6346a6fc-c9c3-478b-aacc-c5df3a3316e0.png">





























# To make an image , quick bite cmds
<img width="733" alt="image" src="https://user-images.githubusercontent.com/75510135/125189765-5c176000-e257-11eb-8a77-8e2d6d151086.png">

<img width="894" alt="image" src="https://user-images.githubusercontent.com/75510135/125190024-b82eb400-e258-11eb-8178-4f5c7adddf9b.png">

<img width="726" alt="image" src="https://user-images.githubusercontent.com/75510135/125190033-c8469380-e258-11eb-91ea-b7ec231e07d3.png">
<img width="965" alt="image" src="https://user-images.githubusercontent.com/75510135/125190094-0f348900-e259-11eb-8766-3a1f6bfa2aaf.png">

<img width="727" alt="image" src="https://user-images.githubusercontent.com/75510135/125190139-32f7cf00-e259-11eb-93c6-6907fdfa08ba.png">



# Listing file in docker image
<img width="417" alt="image" src="https://user-images.githubusercontent.com/75510135/123888162-82dcb900-d970-11eb-93d4-f21554750812.png">

# Basic docker image with nginx
<img width="486" alt="image" src="https://user-images.githubusercontent.com/75510135/123889104-6e012500-d972-11eb-9e08-8944159b4532.png">

# NGINX config
<img width="652" alt="image" src="https://user-images.githubusercontent.com/75510135/123889026-47db8500-d972-11eb-9ff1-e201197dfea9.png">

# Run basic Docker cmds
<img width="894" alt="image" src="https://user-images.githubusercontent.com/75510135/123889301-db14ba80-d972-11eb-8209-717ca09fb407.png">

# Docker => Setting up Env Variable
<img width="925" alt="image" src="https://user-images.githubusercontent.com/75510135/123890076-427f3a00-d974-11eb-8e11-24e76bdb6d2b.png">


<img width="661" alt="image" src="https://user-images.githubusercontent.com/75510135/123890296-9ab63c00-d974-11eb-8676-1711bb87ce5a.png">


<img width="730" alt="image" src="https://user-images.githubusercontent.com/75510135/123890485-e832a900-d974-11eb-9f73-d49869356522.png">


## DevOps Docker Env
- https://stackoverflow.com/questions/59932994/how-to-set-environment-variables-in-dockerfile-via-azure-devops
- https://docs.microsoft.com/en-us/azure/app-service/configure-custom-container?pivots=container-linux#configure-environment-variables
- https://stackoverflow.com/questions/63278658/build-and-push-a-docker-image-with-build-arguments-from-devops-to-acr
- https://codefresh.io/docs/docs/yaml-examples/examples/build-an-image-with-build-arguments/

# Dockerfile
<img width="815" alt="image" src="https://user-images.githubusercontent.com/75510135/125464559-7e50fdbe-9337-4d7e-a297-07eb44394970.png">

<img width="605" alt="image" src="https://user-images.githubusercontent.com/75510135/125464591-5728395d-7795-4e37-8cb5-b01b01f8fd14.png">

<img width="541" alt="image" src="https://user-images.githubusercontent.com/75510135/125464639-ba1d5905-6873-47ad-85d2-e342e32be139.png">

<img width="735" alt="image" src="https://user-images.githubusercontent.com/75510135/125465189-657f32d4-f8e9-414d-b14c-facdeaf58701.png">
<img width="681" alt="image" src="https://user-images.githubusercontent.com/75510135/125465520-57206356-77fb-4a8c-ae98-6171832ebea6.png">
<img width="578" alt="image" src="https://user-images.githubusercontent.com/75510135/125465843-0a06df11-71de-4fdf-b327-bb6f52f4f25a.png">

<img width="834" alt="image" src="https://user-images.githubusercontent.com/75510135/125466155-9f2479bb-69cb-4e0e-9e06-de1eb2ac2f2e.png">
<img width="416" alt="image" src="https://user-images.githubusercontent.com/75510135/125466257-5ab80006-7c8e-4517-b099-39e0e88db558.png">
<img width="608" alt="image" src="https://user-images.githubusercontent.com/75510135/125466504-1d500623-b5df-49ee-be0b-a07ae14d4aac.png">
<img width="546" alt="image" src="https://user-images.githubusercontent.com/75510135/125466665-f57a3fe2-8127-42b8-969f-4fce4a61e664.png">
<img width="804" alt="image" src="https://user-images.githubusercontent.com/75510135/125467764-5a2d3f4f-e097-424b-badc-775d7cd7df98.png">
<img width="807" alt="image" src="https://user-images.githubusercontent.com/75510135/125468211-8ea726a0-5003-4fb2-b98c-3ee9801329fe.png">
<img width="826" alt="image" src="https://user-images.githubusercontent.com/75510135/125468420-8f59ffa3-10d9-4c34-8e3e-584b8606572a.png">
<img width="886" alt="image" src="https://user-images.githubusercontent.com/75510135/125468803-92d4cb96-74d7-45ba-8190-57204f86e2c6.png">

# Recap
<img width="589" alt="image" src="https://user-images.githubusercontent.com/75510135/125559413-0b8d46fc-15ec-4df4-9283-ba171a594a85.png">

<img width="591" alt="image" src="https://user-images.githubusercontent.com/75510135/125559588-14765d94-29d7-46ee-9f72-474c67a29340.png">

<img width="606" alt="image" src="https://user-images.githubusercontent.com/75510135/125559758-3838057a-6420-4799-8772-736bdaf88e80.png">

# Rebuild with Cache
<img width="691" alt="image" src="https://user-images.githubusercontent.com/75510135/125559832-7f76706d-61cc-4b66-8bec-3f4aee424400.png">
<img width="723" alt="image" src="https://user-images.githubusercontent.com/75510135/125559971-87374447-0ed5-4e81-9cfe-4ca5cffbf63b.png">
# Image tagging
<img width="815" alt="image" src="https://user-images.githubusercontent.com/75510135/125560661-40d1102f-7f96-4b90-af6d-a4c8e7728e9b.png">
<img width="745" alt="image" src="https://user-images.githubusercontent.com/75510135/125560703-0cb78775-da59-4742-8e15-240d9baabeb6.png">
Note for Windows Users

In the upcoming lecture, we will be running a command to create a new image using docker commit with this command:

docker commit -c 'CMD ["redis-server"]' CONTAINERID

If you are a Windows user you may get an error like "/bin/sh: [redis-server]: not found" or "No Such Container"

Instead, try running the command like this:

docker commit -c "CMD 'redis-server'" CONTAINERID
<img width="738" alt="image" src="https://user-images.githubusercontent.com/75510135/125561071-84d9c9bb-b0ee-42a9-8b30-08a4a8d1bf76.png">

# build image from a running container
<img width="925" alt="image" src="https://user-images.githubusercontent.com/75510135/125561293-961a2951-d930-4c4b-8f08-da27a8b3c81e.png">

# Project
<img width="735" alt="image" src="https://user-images.githubusercontent.com/75510135/125561641-e8163f1e-fbcb-4bc8-9f83-5b1a23fa7e47.png">
<img width="516" alt="image" src="https://user-images.githubusercontent.com/75510135/125561661-f8766d77-93f7-4387-89c8-eaa8005538f7.png">

<img width="894" alt="image" src="https://user-images.githubusercontent.com/75510135/125563790-2b71caab-1b84-4bf4-82df-224fd69296d5.png">

<img width="670" alt="image" src="https://user-images.githubusercontent.com/75510135/125573337-26957e92-aa51-427b-bbcf-b99fbbd3445c.png">

Required WORKDIR update - "Could not detect node name", "idealTree" errors

10-24-2020

The v15 version of Node has recently been released and is causing issues with some of our project code.

In the next lecture you may get the following error when building the Dockerfile:

npm ERR! could not detect node name from path or package

or

npm ERR! idealTree already exists

To resolve this, add a WORKDIR right after the FROM instruction: (we will be adding this very soon anyway)

    FROM node:alpine
     
    WORKDIR /usr/app

Also, you will no longer get the error regarding the missing package.json as shown at around 7:16 in the video. With Node v15 / npm v7, if you run npm install in a directory without a package.json, an empty package.json is now created for you and will no longer throw this error. However, a properly written package.json listing your dependencies is still required to run a Node based application.

<img width="565" alt="image" src="https://user-images.githubusercontent.com/75510135/125576589-380be128-b26c-4a67-87e6-9e98775d5ac5.png">

<img width="566" alt="image" src="https://user-images.githubusercontent.com/75510135/125577571-43415657-855f-4e35-aa71-3de5669b02c3.png">


# Port forwarding
<img width="909" alt="image" src="https://user-images.githubusercontent.com/75510135/125577807-8d3234e3-7ef6-4b4b-8922-7e8aa57be76e.png">

<img width="899" alt="image" src="https://user-images.githubusercontent.com/75510135/125579187-a8220f13-e77b-4243-8736-30ad63d662a8.png">

<img width="903" alt="image" src="https://user-images.githubusercontent.com/75510135/125579349-61296c73-1365-472f-bf3d-0a28abb20df9.png">

<img width="931" alt="image" src="https://user-images.githubusercontent.com/75510135/125579461-4eb9b8b6-d557-461c-bdab-84477eb31efe.png">

# Working dir
<img width="919" alt="image" src="https://user-images.githubusercontent.com/75510135/125580839-fccc610c-0cbe-4fb3-83d0-bc6e4ddedacd.png">

<img width="513" alt="image" src="https://user-images.githubusercontent.com/75510135/125587824-85476501-2a64-4e9b-9e36-51883eb738bf.png">

<img width="620" alt="image" src="https://user-images.githubusercontent.com/75510135/125587973-ea3d0a06-4571-4b42-8f42-93373da7f4db.png">

<img width="921" alt="image" src="https://user-images.githubusercontent.com/75510135/125588018-2ff20bdd-f2f1-4cdb-a6b9-de4382d8a4c3.png">

<img width="927" alt="image" src="https://user-images.githubusercontent.com/75510135/125588528-34526a50-25b9-4d03-b244-799083d0c34e.png">

# Minimizing builds
<img width="568" alt="image" src="https://user-images.githubusercontent.com/75510135/125589928-3a3713cc-d65c-48f8-9dee-c1100ce296f7.png">



















