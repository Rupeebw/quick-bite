# References
Buildkit Features and Documentation
If you want to learn more about features Buildkit has to offer, please check out the following pages:

https://docs.docker.com/develop/develop-images/build_enhancements/

https://docs.docker.com/engine/reference/commandline/build/#specifying-external-cache-sources

# To make an image , quick bite cmds
<img width="733" alt="image" src="https://user-images.githubusercontent.com/75510135/125189765-5c176000-e257-11eb-8a77-8e2d6d151086.png">

<img width="894" alt="image" src="https://user-images.githubusercontent.com/75510135/125190024-b82eb400-e258-11eb-8178-4f5c7adddf9b.png">

<img width="726" alt="image" src="https://user-images.githubusercontent.com/75510135/125190033-c8469380-e258-11eb-91ea-b7ec231e07d3.png">
<img width="965" alt="image" src="https://user-images.githubusercontent.com/75510135/125190094-0f348900-e259-11eb-8766-3a1f6bfa2aaf.png">

<img width="727" alt="image" src="https://user-images.githubusercontent.com/75510135/125190139-32f7cf00-e259-11eb-93c6-6907fdfa08ba.png">



# Listing file in docker image
<img width="417" alt="image" src="https://user-images.githubusercontent.com/75510135/123888162-82dcb900-d970-11eb-93d4-f21554750812.png">

# Basic docker image with nginx
<img width="486" alt="image" src="https://user-images.githubusercontent.com/75510135/123889104-6e012500-d972-11eb-9e08-8944159b4532.png">

# NGINX config
<img width="652" alt="image" src="https://user-images.githubusercontent.com/75510135/123889026-47db8500-d972-11eb-9ff1-e201197dfea9.png">

# Run basic Docker cmds
<img width="894" alt="image" src="https://user-images.githubusercontent.com/75510135/123889301-db14ba80-d972-11eb-8209-717ca09fb407.png">

# Docker => Setting up Env Variable
<img width="925" alt="image" src="https://user-images.githubusercontent.com/75510135/123890076-427f3a00-d974-11eb-8e11-24e76bdb6d2b.png">


<img width="661" alt="image" src="https://user-images.githubusercontent.com/75510135/123890296-9ab63c00-d974-11eb-8676-1711bb87ce5a.png">


<img width="730" alt="image" src="https://user-images.githubusercontent.com/75510135/123890485-e832a900-d974-11eb-9f73-d49869356522.png">


## DevOps Docker Env
- https://stackoverflow.com/questions/59932994/how-to-set-environment-variables-in-dockerfile-via-azure-devops
- https://docs.microsoft.com/en-us/azure/app-service/configure-custom-container?pivots=container-linux#configure-environment-variables
- https://stackoverflow.com/questions/63278658/build-and-push-a-docker-image-with-build-arguments-from-devops-to-acr
- https://codefresh.io/docs/docs/yaml-examples/examples/build-an-image-with-build-arguments/

# Dockerfile
<img width="815" alt="image" src="https://user-images.githubusercontent.com/75510135/125464559-7e50fdbe-9337-4d7e-a297-07eb44394970.png">

<img width="605" alt="image" src="https://user-images.githubusercontent.com/75510135/125464591-5728395d-7795-4e37-8cb5-b01b01f8fd14.png">

<img width="541" alt="image" src="https://user-images.githubusercontent.com/75510135/125464639-ba1d5905-6873-47ad-85d2-e342e32be139.png">

<img width="735" alt="image" src="https://user-images.githubusercontent.com/75510135/125465189-657f32d4-f8e9-414d-b14c-facdeaf58701.png">
<img width="681" alt="image" src="https://user-images.githubusercontent.com/75510135/125465520-57206356-77fb-4a8c-ae98-6171832ebea6.png">
<img width="578" alt="image" src="https://user-images.githubusercontent.com/75510135/125465843-0a06df11-71de-4fdf-b327-bb6f52f4f25a.png">

<img width="834" alt="image" src="https://user-images.githubusercontent.com/75510135/125466155-9f2479bb-69cb-4e0e-9e06-de1eb2ac2f2e.png">
<img width="416" alt="image" src="https://user-images.githubusercontent.com/75510135/125466257-5ab80006-7c8e-4517-b099-39e0e88db558.png">
<img width="608" alt="image" src="https://user-images.githubusercontent.com/75510135/125466504-1d500623-b5df-49ee-be0b-a07ae14d4aac.png">
<img width="546" alt="image" src="https://user-images.githubusercontent.com/75510135/125466665-f57a3fe2-8127-42b8-969f-4fce4a61e664.png">
<img width="804" alt="image" src="https://user-images.githubusercontent.com/75510135/125467764-5a2d3f4f-e097-424b-badc-775d7cd7df98.png">
<img width="807" alt="image" src="https://user-images.githubusercontent.com/75510135/125468211-8ea726a0-5003-4fb2-b98c-3ee9801329fe.png">
<img width="826" alt="image" src="https://user-images.githubusercontent.com/75510135/125468420-8f59ffa3-10d9-4c34-8e3e-584b8606572a.png">
<img width="886" alt="image" src="https://user-images.githubusercontent.com/75510135/125468803-92d4cb96-74d7-45ba-8190-57204f86e2c6.png">

# Recap
<img width="589" alt="image" src="https://user-images.githubusercontent.com/75510135/125559413-0b8d46fc-15ec-4df4-9283-ba171a594a85.png">

<img width="591" alt="image" src="https://user-images.githubusercontent.com/75510135/125559588-14765d94-29d7-46ee-9f72-474c67a29340.png">

<img width="606" alt="image" src="https://user-images.githubusercontent.com/75510135/125559758-3838057a-6420-4799-8772-736bdaf88e80.png">

# Rebuild with Cache
<img width="691" alt="image" src="https://user-images.githubusercontent.com/75510135/125559832-7f76706d-61cc-4b66-8bec-3f4aee424400.png">
<img width="723" alt="image" src="https://user-images.githubusercontent.com/75510135/125559971-87374447-0ed5-4e81-9cfe-4ca5cffbf63b.png">
# Image tagging
<img width="815" alt="image" src="https://user-images.githubusercontent.com/75510135/125560661-40d1102f-7f96-4b90-af6d-a4c8e7728e9b.png">
<img width="745" alt="image" src="https://user-images.githubusercontent.com/75510135/125560703-0cb78775-da59-4742-8e15-240d9baabeb6.png">
Note for Windows Users

In the upcoming lecture, we will be running a command to create a new image using docker commit with this command:

docker commit -c 'CMD ["redis-server"]' CONTAINERID

If you are a Windows user you may get an error like "/bin/sh: [redis-server]: not found" or "No Such Container"

Instead, try running the command like this:

docker commit -c "CMD 'redis-server'" CONTAINERID
<img width="738" alt="image" src="https://user-images.githubusercontent.com/75510135/125561071-84d9c9bb-b0ee-42a9-8b30-08a4a8d1bf76.png">

# build image from a running container
<img width="925" alt="image" src="https://user-images.githubusercontent.com/75510135/125561293-961a2951-d930-4c4b-8f08-da27a8b3c81e.png">

# Project
<img width="735" alt="image" src="https://user-images.githubusercontent.com/75510135/125561641-e8163f1e-fbcb-4bc8-9f83-5b1a23fa7e47.png">
<img width="516" alt="image" src="https://user-images.githubusercontent.com/75510135/125561661-f8766d77-93f7-4387-89c8-eaa8005538f7.png">

<img width="894" alt="image" src="https://user-images.githubusercontent.com/75510135/125563790-2b71caab-1b84-4bf4-82df-224fd69296d5.png">

<img width="670" alt="image" src="https://user-images.githubusercontent.com/75510135/125573337-26957e92-aa51-427b-bbcf-b99fbbd3445c.png">

Required WORKDIR update - "Could not detect node name", "idealTree" errors

10-24-2020

The v15 version of Node has recently been released and is causing issues with some of our project code.

In the next lecture you may get the following error when building the Dockerfile:

npm ERR! could not detect node name from path or package

or

npm ERR! idealTree already exists

To resolve this, add a WORKDIR right after the FROM instruction: (we will be adding this very soon anyway)

    FROM node:alpine
     
    WORKDIR /usr/app

Also, you will no longer get the error regarding the missing package.json as shown at around 7:16 in the video. With Node v15 / npm v7, if you run npm install in a directory without a package.json, an empty package.json is now created for you and will no longer throw this error. However, a properly written package.json listing your dependencies is still required to run a Node based application.

<img width="565" alt="image" src="https://user-images.githubusercontent.com/75510135/125576589-380be128-b26c-4a67-87e6-9e98775d5ac5.png">

<img width="566" alt="image" src="https://user-images.githubusercontent.com/75510135/125577571-43415657-855f-4e35-aa71-3de5669b02c3.png">


# Port forwarding
<img width="909" alt="image" src="https://user-images.githubusercontent.com/75510135/125577807-8d3234e3-7ef6-4b4b-8922-7e8aa57be76e.png">

<img width="899" alt="image" src="https://user-images.githubusercontent.com/75510135/125579187-a8220f13-e77b-4243-8736-30ad63d662a8.png">

<img width="903" alt="image" src="https://user-images.githubusercontent.com/75510135/125579349-61296c73-1365-472f-bf3d-0a28abb20df9.png">

<img width="931" alt="image" src="https://user-images.githubusercontent.com/75510135/125579461-4eb9b8b6-d557-461c-bdab-84477eb31efe.png">

# Working dir
<img width="919" alt="image" src="https://user-images.githubusercontent.com/75510135/125580839-fccc610c-0cbe-4fb3-83d0-bc6e4ddedacd.png">

<img width="513" alt="image" src="https://user-images.githubusercontent.com/75510135/125587824-85476501-2a64-4e9b-9e36-51883eb738bf.png">

<img width="620" alt="image" src="https://user-images.githubusercontent.com/75510135/125587973-ea3d0a06-4571-4b42-8f42-93373da7f4db.png">

<img width="921" alt="image" src="https://user-images.githubusercontent.com/75510135/125588018-2ff20bdd-f2f1-4cdb-a6b9-de4382d8a4c3.png">

<img width="927" alt="image" src="https://user-images.githubusercontent.com/75510135/125588528-34526a50-25b9-4d03-b244-799083d0c34e.png">

# Minimizing builds
<img width="568" alt="image" src="https://user-images.githubusercontent.com/75510135/125589928-3a3713cc-d65c-48f8-9dee-c1100ce296f7.png">



















