- https://github.com/rupeshpanwar/Simple-DevOps-Project
- https://github.com/rupeshpanwar/hello-world
- https://pkg.jenkins.io/redhat-stable/
 <img width="355" alt="image" src="https://user-images.githubusercontent.com/75510135/145931216-c19316e9-4b40-4eb7-95c9-e36f50c79904.png">


<img width="1022" alt="image" src="https://user-images.githubusercontent.com/75510135/145779200-01c2534a-9b10-4401-ad5a-a0d0b295368a.png">
<img width="873" alt="image" src="https://user-images.githubusercontent.com/75510135/145779423-5ac836db-1894-488f-95f1-79894fe83c6e.png">
<img width="1034" alt="image" src="https://user-images.githubusercontent.com/75510135/145779507-7ead8e43-e485-4b18-8e95-5c58e3745756.png">
<img width="1025" alt="image" src="https://user-images.githubusercontent.com/75510135/145784818-3173112a-b1dd-47bf-875c-463f6ff0676b.png">

<img width="1004" alt="image" src="https://user-images.githubusercontent.com/75510135/145785061-8341cefc-4be6-4fe7-b8db-74f07314dfd5.png">
<img width="1041" alt="image" src="https://user-images.githubusercontent.com/75510135/145785163-e8f31004-02a1-4ae0-abb5-572ffac8801d.png">
- git code
<img width="936" alt="image" src="https://user-images.githubusercontent.com/75510135/145785351-ca75cdfa-d451-47d4-b3fe-33cea3ee98a0.png">
<img width="478" alt="image" src="https://user-images.githubusercontent.com/75510135/145785446-8f97d4e1-e7f3-4f8f-b7a6-632248f67793.png">

- deploy on EC2
<img width="1012" alt="image" src="https://user-images.githubusercontent.com/75510135/145787885-9952d8ea-d83d-4240-933f-da2b4cc11fe8.png">
- pick java home path from jenkins machine and configure jdk in jenkins ui
<img width="581" alt="image" src="https://user-images.githubusercontent.com/75510135/145789675-3648a192-ae51-44e0-9298-92b1dfdc1f05.png">
<img width="1067" alt="image" src="https://user-images.githubusercontent.com/75510135/145789837-4742c80b-7b81-4a51-9651-a063fc502ec0.png">
- install git
<img width="686" alt="image" src="https://user-images.githubusercontent.com/75510135/145791254-07b2c56a-8fcb-4eef-956c-5b6ac132d3f2.png">
<img width="455" alt="image" src="https://user-images.githubusercontent.com/75510135/145791532-e2926bb2-7139-40e0-b5b8-7beb22e23eb0.png">
<img width="706" alt="image" src="https://user-images.githubusercontent.com/75510135/145791808-a621135c-b99a-4bd8-948b-df2ec4683dcc.png">

Troubleshooting: Unable to Push code onto GitHub

Recently GitHub enforced to use Personal access token while committing code onto GitHub. Follow the below steps to generate Personal access tokens


1. Log in to your Github account

Click on your account on the Right side corner --> Settings


2. Once the setting page opened to look for "Developer settings" --> Personal access tokens

3. Generate a new token and use this token instead of password 


Check the below link for detailed steps with screenshots.

https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token


<img width="551" alt="image" src="https://user-images.githubusercontent.com/75510135/145792014-4e8cc347-738c-4181-9588-69386e1c0ef2.png">

- install maven
<img width="849" alt="image" src="https://user-images.githubusercontent.com/75510135/145792210-93de7218-0e20-4de7-bdc8-f0ffa282a53e.png">

<img width="664" alt="image" src="https://user-images.githubusercontent.com/75510135/145792284-d4646159-17e1-4f3a-aa24-40799cb4fd01.png">
<img width="741" alt="image" src="https://user-images.githubusercontent.com/75510135/145792462-50fc3f9d-89fd-49a5-9e58-f7dad69abbf4.png">
<img width="998" alt="image" src="https://user-images.githubusercontent.com/75510135/145792491-53e5c7aa-0a53-410e-9665-df2a611bc76f.png">

<img width="618" alt="image" src="https://user-images.githubusercontent.com/75510135/145792713-2faa8b49-5662-47a9-87aa-a9177e09a93f.png">
<img width="598" alt="image" src="https://user-images.githubusercontent.com/75510135/145792921-8190fbd6-a6cf-4068-8bd2-de976e542670.png">

<img width="570" alt="image" src="https://user-images.githubusercontent.com/75510135/145792763-4cd0dc83-2be9-4df6-bc29-416395007a94.png">

<img width="477" alt="image" src="https://user-images.githubusercontent.com/75510135/145793080-47d3b928-81a9-444c-b638-ffcedb4da662.png">

<img width="679" alt="image" src="https://user-images.githubusercontent.com/75510135/145793245-34f94311-274d-4eef-81f7-37c1aabab632.png">

- build Maven project pipeline
<img width="866" alt="image" src="https://user-images.githubusercontent.com/75510135/145793449-2d1b07f9-76ba-465f-ac4e-d03798dd88f8.png">

<img width="877" alt="image" src="https://user-images.githubusercontent.com/75510135/145793600-95a70afb-f4e7-4a81-be86-968466705f80.png">

<img width="908" alt="image" src="https://user-images.githubusercontent.com/75510135/145793759-a2c6c7e8-9177-4892-a4e7-0c6d7b06efac.png">

<img width="688" alt="image" src="https://user-images.githubusercontent.com/75510135/145793971-889043b8-1bd9-49de-b4e1-2e21bfaa25c5.png">

<img width="496" alt="image" src="https://user-images.githubusercontent.com/75510135/145794021-ee4cd7c4-82d1-492c-8dc6-df80bda3a979.png">

<img width="497" alt="image" src="https://user-images.githubusercontent.com/75510135/145794095-758a3507-a33c-42c3-870f-ef8c96092795.png">

<img width="556" alt="image" src="https://user-images.githubusercontent.com/75510135/145794264-6bb21aca-8d29-4ebd-a955-38e3988711d1.png">

<img width="737" alt="image" src="https://user-images.githubusercontent.com/75510135/145794307-e1bb1bec-74a9-4e61-adc2-76cf744ae6d1.png">

<img width="682" alt="image" src="https://user-images.githubusercontent.com/75510135/145794608-441e144e-38fa-433f-84cf-c59b5dbf84fa.png">

<img width="691" alt="image" src="https://user-images.githubusercontent.com/75510135/145794687-6a8644f1-e33b-4ceb-8c5f-157a76492e10.png">

<img width="653" alt="image" src="https://user-images.githubusercontent.com/75510135/145794775-48aaf989-f763-4283-a79c-ed98f85a6c8c.png">

<img width="502" alt="image" src="https://user-images.githubusercontent.com/75510135/145795381-297e34e9-17fa-41f7-b55f-4af8419b2cdd.png">

<img width="1034" alt="image" src="https://user-images.githubusercontent.com/75510135/145795485-3f8f12d4-5235-4c25-8fc0-9fb0e803edcb.png">

<img width="1037" alt="image" src="https://user-images.githubusercontent.com/75510135/145795613-4344ae05-4053-408f-ac70-73ab0e097937.png">

<img width="1079" alt="image" src="https://user-images.githubusercontent.com/75510135/145795779-5dae138c-a6e0-4975-b56f-7ee63188e30c.png">
<img width="678" alt="image" src="https://user-images.githubusercontent.com/75510135/145796255-196bde3f-7242-4468-a6ee-f693972864fa.png">

<img width="862" alt="image" src="https://user-images.githubusercontent.com/75510135/145795961-abd700e4-9be8-49d6-958f-04c1551f99d4.png">

<img width="1045" alt="image" src="https://user-images.githubusercontent.com/75510135/145796141-ab947945-18a2-471b-80a3-1ba86753107c.png">
<img width="684" alt="image" src="https://user-images.githubusercontent.com/75510135/145796372-636e2d91-c67e-475c-b749-0a3401aed15c.png">

<img width="903" alt="image" src="https://user-images.githubusercontent.com/75510135/145796565-b7063fae-8917-47ab-bc33-812ba70b97f2.png">

<img width="875" alt="image" src="https://user-images.githubusercontent.com/75510135/145796663-44c7b314-853b-4fd7-91f7-3b0a479d8bce.png">

<img width="754" alt="image" src="https://user-images.githubusercontent.com/75510135/145796757-8222c764-eefe-4a94-a8f1-a11c71d839d6.png">

<img width="892" alt="image" src="https://user-images.githubusercontent.com/75510135/145796846-4cc7ed84-2303-490c-88cb-c0c1e3781952.png">

<img width="970" alt="image" src="https://user-images.githubusercontent.com/75510135/145796921-5ef21309-d25e-4a4b-9a8d-11b1795a0faa.png">

- deploy to container
- install plusgin for container
<img width="481" alt="image" src="https://user-images.githubusercontent.com/75510135/145916220-05123afd-53b6-45de-a01b-244e1949b2d2.png">

- create Maven based pipeline
<img width="842" alt="image" src="https://user-images.githubusercontent.com/75510135/145916293-01966aa5-51a8-4d5c-8a4a-8c75ba91c6c2.png">

<img width="915" alt="image" src="https://user-images.githubusercontent.com/75510135/145916353-f0a4c366-9a70-4fd0-9b8b-8a4d51523b80.png">

<img width="962" alt="image" src="https://user-images.githubusercontent.com/75510135/145916584-ff28acd0-9ec7-4385-8f9f-deebff7fed59.png">

<img width="881" alt="image" src="https://user-images.githubusercontent.com/75510135/145916641-f942facd-48e2-422d-9031-ca9f55e375fd.png">

- when Jenkins job is run , files are copied to below location
<img width="1065" alt="image" src="https://user-images.githubusercontent.com/75510135/145916761-e103a0f9-067c-491a-a695-c0ebcbe87100.png">

- to access the application => https://tomcat-server-ip:8080/webapp

- to execute job every min upon finding new code changes
<img width="873" alt="image" src="https://user-images.githubusercontent.com/75510135/145917180-1310e1be-811d-4fc5-b8c4-1693b09f5d32.png">

# deploying Maven to Docker container 
<img width="1026" alt="image" src="https://user-images.githubusercontent.com/75510135/145917747-85cc2c7e-bf6b-495b-a89f-7a74d84ca4b8.png">

- setup docker environment first
<img width="370" alt="image" src="https://user-images.githubusercontent.com/75510135/145917834-b0bae1c3-c96d-4f1e-b94a-c2b64a87a413.png">

<img width="706" alt="image" src="https://user-images.githubusercontent.com/75510135/145917871-c9c8317a-45c0-48d2-8f0a-e3a547784899.png">

<img width="398" alt="image" src="https://user-images.githubusercontent.com/75510135/145918010-2722206d-1533-4c40-8c83-feed8c184385.png">
- install docker on vm first
<img width="773" alt="image" src="https://user-images.githubusercontent.com/75510135/145918155-2fd0c32e-ebc5-4b4e-8d44-52c07752c6b0.png">

- pull tomcat docker image
<img width="1035" alt="image" src="https://user-images.githubusercontent.com/75510135/145918567-968aa7cf-2477-4360-a444-80921a93604b.png">

<img width="696" alt="image" src="https://user-images.githubusercontent.com/75510135/145918623-1b831011-5a79-4edc-bad4-2c7ad9830bfb.png">

- when run tomcat in docker container
<img width="1029" alt="image" src="https://user-images.githubusercontent.com/75510135/145918756-16b73b9c-a1fe-4fd9-8e24-93d25ae395e0.png">
<img width="771" alt="image" src="https://user-images.githubusercontent.com/75510135/145919002-c4e5bd7d-694a-4b53-8cf5-eaa6b1f6ee14.png">

- now access tomcat using VM public ip
<img width="866" alt="image" src="https://user-images.githubusercontent.com/75510135/145918867-47173978-1a12-43dd-8760-e9b0506da623.png">

<img width="959" alt="image" src="https://user-images.githubusercontent.com/75510135/145919053-161cf628-007b-4518-91c3-250f4f22dc34.png">
<img width="848" alt="image" src="https://user-images.githubusercontent.com/75510135/145919272-92b32bb1-59bb-4cb2-a304-ee6a925ea854.png">

<img width="890" alt="image" src="https://user-images.githubusercontent.com/75510135/145919356-6e1fc064-4762-437b-98c4-95bc05b60d1c.png">

## jenkins - docker integration
- install plugin 
<img width="1068" alt="image" src="https://user-images.githubusercontent.com/75510135/145919766-b1c3a5c3-01e5-489c-ae4f-bad0aedcc0be.png">

- create a user => dockeradmin and make part of docker group
<img width="477" alt="image" src="https://user-images.githubusercontent.com/75510135/145919997-caef99bc-ea01-4ff1-b49d-005ebdc8124f.png">

<img width="650" alt="image" src="https://user-images.githubusercontent.com/75510135/145919936-04167432-6651-4fb8-a73c-2bcb1f5e5aa1.png">

- take ip address of the docker server
<img width="506" alt="image" src="https://user-images.githubusercontent.com/75510135/145920148-6a94950f-f050-4003-92bf-efd5a2371639.png">

- enable password based authentication on docker machne
<img width="1063" alt="image" src="https://user-images.githubusercontent.com/75510135/145920276-c035b1ed-4ed6-498a-a846-0301b4dd4a2d.png">
<img width="615" alt="image" src="https://user-images.githubusercontent.com/75510135/145920297-6cba508b-9948-405b-b1a4-3cbcf87dced7.png">
<img width="719" alt="image" src="https://user-images.githubusercontent.com/75510135/145920553-82366f6e-9fde-4de6-b32e-9695c7d44675.png">

<img width="1063" alt="image" src="https://user-images.githubusercontent.com/75510135/145920380-34689d4d-39d7-4976-8550-d859ca8f3961.png">

### create new pipeline , this time copy the configuration of tomcat pipeline 
<img width="489" alt="image" src="https://user-images.githubusercontent.com/75510135/145921604-3604fe9c-999f-428e-aa21-3b0b79dde814.png">
- disable POllSCM this time
- under Post -build action, select publish over ssh
<img width="876" alt="image" src="https://user-images.githubusercontent.com/75510135/145921732-6dfaa6fe-03d8-4bfa-aaca-3c77f168a6af.png">

- now mention the path in the jenkins pipeline
<img width="856" alt="image" src="https://user-images.githubusercontent.com/75510135/145922151-a8f3f3a7-669b-441b-a476-2a2c7dff4fc8.png">

<img width="1074" alt="image" src="https://user-images.githubusercontent.com/75510135/145922268-c78ca063-63c8-401a-800c-40381710ef65.png">

- verify the artifact (war file) on docker host machine
<img width="467" alt="image" src="https://user-images.githubusercontent.com/75510135/145922333-c47223f1-c110-4a3a-9f8e-8b6eda922b6c.png">

- little modification regarding directory structure
<img width="850" alt="image" src="https://user-images.githubusercontent.com/75510135/145922399-d170be82-4d72-4f7e-9fb1-39316d082a07.png">

<img width="598" alt="image" src="https://user-images.githubusercontent.com/75510135/145922484-ce39d50d-d8a3-4436-9cd5-264192ebfd0c.png">

#### now , to deploy war , write a dockerfile 
<img width="677" alt="image" src="https://user-images.githubusercontent.com/75510135/145922677-56acb0b9-baa6-4fac-aaa7-12591d58ac8b.png">

<img width="1045" alt="image" src="https://user-images.githubusercontent.com/75510135/145922767-90809735-19e4-44aa-8bed-ca1d91999eb8.png">

<img width="835" alt="image" src="https://user-images.githubusercontent.com/75510135/145922901-2a3c1f86-8af0-4135-a625-c0b80c4367f5.png">

<img width="588" alt="image" src="https://user-images.githubusercontent.com/75510135/145922968-b955ba30-e6be-4598-9f44-2528e7bc15f1.png">

<img width="1063" alt="image" src="https://user-images.githubusercontent.com/75510135/145923049-b0729c0d-6bfc-4316-aafb-a33ac56d9f21.png">

#### create new pipeline to deploy on docker container directly
<img width="461" alt="image" src="https://user-images.githubusercontent.com/75510135/145925046-5d0269bf-bc49-4698-8ad7-b8f8a0e24107.png">

- pass argument to build the image and run the container
<img width="867" alt="image" src="https://user-images.githubusercontent.com/75510135/145925313-3d2c09f6-5f1b-46c4-a5c1-f7becc77f2df.png">

<img width="1059" alt="image" src="https://user-images.githubusercontent.com/75510135/145925472-1a0daeaf-beb2-4aab-97ae-7eba2f286fee.png">

- in case of rebuild, some issue might encounter
<img width="805" alt="image" src="https://user-images.githubusercontent.com/75510135/145925607-354b0536-8ed5-4e98-840b-c1f61ae0915f.png">

Troubleshooting: Unable to push docker image

If you are unable to push docker image it means that you haven't logged into dockerhub as a user which you are trying to push.

during my course, I ran playbook as a "ansadmin" user (because there is a typo in the "become: true" so it didn't execute as root user). If you are executing as a root user then you should log in to DockerHub as a root user.

in short, you can do either one of the below

1. remove or comment "become: true" in the playbook  or

2. Login to dockerhub as a root user



# Integrate Ansible with Jenins to Deploy on Docker

<img width="1039" alt="image" src="https://user-images.githubusercontent.com/75510135/145925857-e14f95a5-4a68-4460-a456-4590a08bb803.png">


<img width="833" alt="image" src="https://user-images.githubusercontent.com/75510135/145925905-86902ef4-cce8-4ba5-86a1-7b5d06462563.png">

<img width="771" alt="image" src="https://user-images.githubusercontent.com/75510135/145925931-c9c5edf5-c9a3-46d1-9ed8-53d49acad0cb.png">
<img width="1053" alt="image" src="https://user-images.githubusercontent.com/75510135/145926264-bce58ed8-dfff-49df-b504-19748248abd0.png">
<img width="1046" alt="image" src="https://user-images.githubusercontent.com/75510135/145926285-9790c651-804f-4283-8f29-b81199410cdd.png">
<img width="1034" alt="image" src="https://user-images.githubusercontent.com/75510135/145926300-15270e70-74ba-49d5-8550-ffbd1844a58c.png">
<img width="266" alt="image" src="https://user-images.githubusercontent.com/75510135/145926454-18bfbfa4-a408-4c4c-a9bb-f437393a449f.png">
<img width="435" alt="image" src="https://user-images.githubusercontent.com/75510135/145928682-58c4f1ad-e165-444b-9dc4-59f6f6b28e55.png">
<img width="629" alt="image" src="https://user-images.githubusercontent.com/75510135/145928757-8f24e46a-cb75-445d-abd6-f5a8ddc6b979.png">
<img width="769" alt="image" src="https://user-images.githubusercontent.com/75510135/145928878-7f05a845-2141-45c0-9a82-03ba5ce40ecd.png">
<img width="573" alt="image" src="https://user-images.githubusercontent.com/75510135/145929019-333eff5f-5b93-4c35-9e84-f7dea18e52b6.png">

<img width="752" alt="image" src="https://user-images.githubusercontent.com/75510135/145928984-30301add-ff13-4c77-9172-407f251bc958.png">

- install docker on Ansible machine, add ansible admin to Docker group 
<img width="639" alt="image" src="https://user-images.githubusercontent.com/75510135/145929248-c6e9e9a4-c8ea-40c2-8f9d-ab2ff16e29da.png">
- change password authentication
<img width="605" alt="image" src="https://user-images.githubusercontent.com/75510135/145929401-dbe8c2ae-47b0-43d3-a75f-802a2faff3d7.png">

<img width="623" alt="image" src="https://user-images.githubusercontent.com/75510135/145929360-6d7a6178-e335-4eb7-9d75-0611984a6da1.png">
- generate key for ansible admin 

<img width="561" alt="image" src="https://user-images.githubusercontent.com/75510135/145929968-87137f1d-ca61-4695-bb1f-05582bc8b2a4.png">
- view the key , rename ansible control node
<img width="505" alt="image" src="https://user-images.githubusercontent.com/75510135/145930068-f812f4bd-10d6-4a36-be3b-8dcb86543d94.png">

## add ansible admin to docker host machine, set the password
<img width="606" alt="image" src="https://user-images.githubusercontent.com/75510135/145930183-cdfdde62-1025-436c-a7fe-36a613942e56.png">

- copy the pub key to docker machine from ansible host machine
<img width="814" alt="image" src="https://user-images.githubusercontent.com/75510135/145930316-1ec6ea21-aece-4697-96f1-a62a2c6a9366.png">

### create hosts file on Ansible server
<img width="563" alt="image" src="https://user-images.githubusercontent.com/75510135/145930479-571611cd-3aed-4a78-8bee-e7c84c7f7941.png">

<img width="594" alt="image" src="https://user-images.githubusercontent.com/75510135/145930549-4799e2ae-d40a-417c-85ad-1fe68abc6d7b.png">

- need to copy the pub key to localhost as well
<img width="833" alt="image" src="https://user-images.githubusercontent.com/75510135/145930671-bcec2361-d608-428e-b11a-e1ba33a85adb.png">

Troubleshooting: Unable to install Ansible

If you are unable to install ansible with "yum install ansible", Please make sure you have installed python first.

then try below command.

sudo amazon-linux-extras install ansible2

#### Integrate Jenkins with Ansible
- get IP of Ansible system
<img width="838" alt="image" src="https://user-images.githubusercontent.com/75510135/145930945-d4e4009c-ee4d-4b43-b938-f77b1e2dcfe7.png">

- configure ssh server for Ansible @ Jenkins , use password authentication
<img width="1080" alt="image" src="https://user-images.githubusercontent.com/75510135/145931029-32ed05f7-fcdd-4d57-a477-fcfea9cd9fcd.png">
<img width="1091" alt="image" src="https://user-images.githubusercontent.com/75510135/145931159-f6e03696-f4c9-4162-b362-8c8c5c71beeb.png">

#### create new pipeline using docker pipeline
<img width="497" alt="image" src="https://user-images.githubusercontent.com/75510135/145931503-bfdfd7e1-9822-480c-b6d1-6601de6abbea.png">
- create a docker named directory to store the artifacts on Ansible server
<img width="781" alt="image" src="https://user-images.githubusercontent.com/75510135/145931660-36b1f835-5535-45c4-ae77-0fb4626ddbd4.png">

- instead of "." in pipeline, modify the path of ansible as created above
<img width="895" alt="image" src="https://user-images.githubusercontent.com/75510135/145931736-e85f74bb-af23-47ed-8caf-2f7eb555c341.png">

<img width="1080" alt="image" src="https://user-images.githubusercontent.com/75510135/145931874-1af4c5e0-da3e-4dd2-9a33-a9eba4cf8ae2.png">

- now, create dockerfile on ansible host machine
<img width="776" alt="image" src="https://user-images.githubusercontent.com/75510135/145932001-e506bcc4-b494-49ca-adb3-196a5841f13e.png">

<img width="675" alt="image" src="https://user-images.githubusercontent.com/75510135/145932034-2965fb04-f05d-4e45-b1ba-9e52d5db2dd6.png">

- write ansible playbook to create docker image out of dockerfile
<img width="802" alt="image" src="https://user-images.githubusercontent.com/75510135/145932298-02c953be-9296-458f-9066-13151af18803.png">

<img width="576" alt="image" src="https://user-images.githubusercontent.com/75510135/145932313-163a4e76-cdfc-4fc8-a572-2ffa91fca66b.png">

<img width="844" alt="image" src="https://user-images.githubusercontent.com/75510135/145932412-126ffbcb-38a7-4ad1-9fe7-ad7afe9acd1e.png">

<img width="985" alt="image" src="https://user-images.githubusercontent.com/75510135/145932440-90577dca-ce31-4b9e-94d1-d89da50fa0ac.png">

<img width="737" alt="image" src="https://user-images.githubusercontent.com/75510135/145932470-6b9371d3-62e0-4a85-a40c-32ebd5463e4a.png">

- modify the ansbile playbook to create container
<img width="752" alt="image" src="https://user-images.githubusercontent.com/75510135/145932571-5dbc2a5d-8fcf-4c8f-9d67-f90cefa21fd1.png">

<img width="833" alt="image" src="https://user-images.githubusercontent.com/75510135/145933760-629aef6f-1294-4e25-9983-4169fce5721b.png">
<img width="1022" alt="image" src="https://user-images.githubusercontent.com/75510135/145933804-2057472d-b731-47a6-8fb5-1589d61b065e.png">
<img width="1011" alt="image" src="https://user-images.githubusercontent.com/75510135/145933824-25a17bdf-222b-4c10-8ec3-0ca9e2b22d1b.png">
<img width="1004" alt="image" src="https://user-images.githubusercontent.com/75510135/145933882-f438a6b2-1bd6-4739-9aee-4b0d75f34ba7.png">
<img width="772" alt="image" src="https://user-images.githubusercontent.com/75510135/145933905-bc6f769e-3ec9-418e-b1a7-25dc491ca6e9.png">

<img width="884" alt="image" src="https://user-images.githubusercontent.com/75510135/145933980-943f35b2-9567-4f80-900c-457da1ccca60.png">
#### run ansible playbook from jenkins 
- look for hosts file on ansible
<img width="780" alt="image" src="https://user-images.githubusercontent.com/75510135/145934288-dedf10b3-96e2-4d5a-a9a1-0ee96049fd3c.png">
<img width="1021" alt="image" src="https://user-images.githubusercontent.com/75510135/145934329-c3146ec1-9ca7-409a-8814-33e7ac466e60.png">
- modify the previous pipeline
<img width="957" alt="image" src="https://user-images.githubusercontent.com/75510135/145934438-d02e2c50-df57-4e8a-b633-53aaa625d678.png">
<img width="948" alt="image" src="https://user-images.githubusercontent.com/75510135/145934533-35412a64-a8eb-4f0a-8e06-1d865b1231bb.png">
<img width="1024" alt="image" src="https://user-images.githubusercontent.com/75510135/145934587-be311662-2aae-4aca-96d1-e8bc731ee215.png">
<img width="1048" alt="image" src="https://user-images.githubusercontent.com/75510135/145934620-6bbdf888-8898-49bb-a0df-c109569cba41.png">
<img width="694" alt="image" src="https://user-images.githubusercontent.com/75510135/145934677-14c4313c-3ad7-41ed-a991-d9ecbd8209b8.png">
- there might be issue to creating the container again with same name
<img width="839" alt="image" src="https://user-images.githubusercontent.com/75510135/145934959-6c05d548-ae93-4b7f-84cf-b9b36bef658d.png">
- remove old container and image before deploying the latest changes
<img width="797" alt="image" src="https://user-images.githubusercontent.com/75510135/145935214-88c03916-7572-4947-9513-9a6e347b5112.png">
<img width="1031" alt="image" src="https://user-images.githubusercontent.com/75510135/145935283-46e1d526-cdab-45c8-a7e9-9368f0205775.png">
<img width="527" alt="image" src="https://user-images.githubusercontent.com/75510135/145935313-f387be97-9259-4ec2-adcf-29f7aeb3df64.png">

<img width="1042" alt="image" src="https://user-images.githubusercontent.com/75510135/145935349-37fecda1-74b2-4bef-a0ab-4f92d7b2f400.png">
### Create dockerhub account to pull image on Docker host machine
<img width="1019" alt="image" src="https://user-images.githubusercontent.com/75510135/145937187-8c3928c6-e04d-4fc4-a74a-e63914e4bd54.png">
- create a repo in dockerhub
<img width="951" alt="image" src="https://user-images.githubusercontent.com/75510135/145937325-e9b1fba6-a855-4a25-848a-fc06a56921c2.png">
- create docker image manually
<img width="855" alt="image" src="https://user-images.githubusercontent.com/75510135/145937601-e9f4789b-6f0a-4c51-bc6d-7724619ffc3d.png">

- login into docker hub via above setup creds and push the image
<img width="1045" alt="image" src="https://user-images.githubusercontent.com/75510135/145937692-07a40b9c-6683-4671-a2c2-33ebea61cdea.png">

<img width="739" alt="image" src="https://user-images.githubusercontent.com/75510135/145937722-6efc3d39-47ef-413b-9a4c-4549a7d07cb7.png">

- add ansible admin user to Docker group on Docker host machine
<img width="577" alt="image" src="https://user-images.githubusercontent.com/75510135/145937913-d95f1b22-430a-4675-beee-fb106c86ee1a.png">

<img width="909" alt="image" src="https://user-images.githubusercontent.com/75510135/145937953-963e16a6-459a-48fb-b603-dfa9e5b4d530.png">
- create playbook to pull and remove the images
<img width="646" alt="image" src="https://user-images.githubusercontent.com/75510135/145938951-43fdb8c4-48d5-45a8-a504-4807654ff644.png">

<img width="764" alt="image" src="https://user-images.githubusercontent.com/75510135/145938904-286d7f9a-d941-4afc-b472-85772c8d2695.png">

<img width="1039" alt="image" src="https://user-images.githubusercontent.com/75510135/145939027-416f27cd-40cf-4a91-a259-b707ebd21264.png">
<img width="1014" alt="image" src="https://user-images.githubusercontent.com/75510135/145939127-71bad421-5233-4797-801c-43cbd4534c91.png">
<img width="813" alt="image" src="https://user-images.githubusercontent.com/75510135/145940349-3ca905fb-46f7-4460-a22b-c79c9b3f3a7d.png">

- modify the hosts file on Ansible server, include Docker host machine IP address
<img width="784" alt="image" src="https://user-images.githubusercontent.com/75510135/145941037-30d3769a-c8be-457f-b971-dab02ecd7fae.png">

<img width="939" alt="image" src="https://user-images.githubusercontent.com/75510135/145941237-aaf2827b-0262-4d07-9854-ac727b6d3efc.png">

<img width="809" alt="image" src="https://user-images.githubusercontent.com/75510135/145941318-44c381d5-6fac-411f-bb18-310ffb8ab8c0.png">

<img width="865" alt="image" src="https://user-images.githubusercontent.com/75510135/145941458-f00c1a2e-47ca-46fc-89fe-01c6c3694c54.png">

- limit the target to run playbook
- create n push docker image
<img width="892" alt="image" src="https://user-images.githubusercontent.com/75510135/145941590-06213fbc-340e-4031-9852-55c2478cdb25.png">

- create container on Docker host machine
<img width="1075" alt="image" src="https://user-images.githubusercontent.com/75510135/145941860-b406c7e8-7a02-4936-b667-38a8899a3f4a.png">

<img width="599" alt="image" src="https://user-images.githubusercontent.com/75510135/145941948-6553b814-22c8-4fb3-9036-4ec8c0ffae8e.png">

#### pipeline to deploy container to Docker via Dockerhub pull
<img width="691" alt="image" src="https://user-images.githubusercontent.com/75510135/145942594-5fd67a3b-606a-4236-8f92-bf2f9acc2233.png">

<img width="894" alt="image" src="https://user-images.githubusercontent.com/75510135/145942661-7a0a6f04-3cca-40b7-9bfa-1f7a7ee639fd.png">

<img width="883" alt="image" src="https://user-images.githubusercontent.com/75510135/145942693-b0efbd08-812a-41d5-904d-29d9bf300e14.png">

<img width="982" alt="image" src="https://user-images.githubusercontent.com/75510135/145942837-bbd6728b-03a0-4569-b951-ef92450c8624.png">

<img width="967" alt="image" src="https://user-images.githubusercontent.com/75510135/145943001-9a9c38ba-bb75-4b91-9220-976c7e831ddc.png">

















